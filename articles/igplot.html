<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>igplot • igplot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="igplot">
<meta property="og:description" content="igplot">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">igplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/igplot.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/baruuum/igplot/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="igplot_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>igplot</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/baruuum/igplot/blob/HEAD/vignettes/igplot.Rmd" class="external-link"><code>vignettes/igplot.Rmd</code></a></small>
      <div class="hidden name"><code>igplot.Rmd</code></div>

    </div>

    
    
<p>To demonstrate what this package provides, we first load the package, the <code>igraph</code> package, and some data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/baruuum/igplot" class="external-link">igplot</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://igraph.org" class="external-link">igraph</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">karate</span>, package <span class="op">=</span> <span class="st">"igraphdata"</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="basic-usage-options">Basic Usage &amp; Options<a class="anchor" aria-label="anchor" href="#basic-usage-options"></a>
</h2>
<p>The most basic usage of the <code>igplot</code> function is the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span><span class="va">karate</span>, layout <span class="op">=</span> <span class="st">"layout_with_fr"</span><span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-2-1.png" width="432" style="display: block; margin: auto;"></p>
<p>where we have set a seed to keep the layout constant across different plots. In fact, you won’t even need to specify the <code>layout</code> option. In this case, the layout of the graph will be created by the <code><a href="https://rdrr.io/pkg/igraph/man/layout_nicely.html" class="external-link">igraph::layout.auto()</a></code> function.</p>
<p>When our graph is directed, we can incorporated this information by specifiying the <code>directed = TRUE</code> option.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/erdos.renyi.game.html" class="external-link">erdos.renyi.game</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">.15</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span><span class="va">g</span>, directed <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-3-1.png" width="432" style="display: block; margin: auto;"></p>
<p>The <code>igplot</code> function admits multiple options to change the appearance of the graph. For example, can use different colors for the nodes and edges using the <code>v_fill</code> and <code>e_col</code> option, respectively, and change the background of the plot with the <code>bg</code> option:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">clust</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/communities.html" class="external-link">membership</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/cluster_infomap.html" class="external-link">cluster_infomap</a></span><span class="op">(</span><span class="va">karate</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="va">vcols</span> <span class="op">=</span> <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">inferno</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">clust</span><span class="op">)</span><span class="op">)</span>, begin <span class="op">=</span> <span class="fl">.2</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span>
<span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span>
    <span class="va">karate</span>, 
    layout <span class="op">=</span> <span class="st">"layout_with_fr"</span>, 
    bg_col <span class="op">=</span> <span class="st">"black"</span>, 
    plot_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
        v_fill <span class="op">=</span> <span class="va">vcols</span><span class="op">[</span><span class="va">clust</span><span class="op">]</span>, 
        v_cex <span class="op">=</span> <span class="fl">.8</span>,
        e_col <span class="op">=</span> <span class="st">"white"</span>
    <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-4-1.png" width="432" style="display: block; margin: auto;"></p>
<p>The function doesn’t include options for the transparency of the colors. But we can always use the <code>scales</code> package for these purposes:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span>
    <span class="va">karate</span>, 
    layout <span class="op">=</span> <span class="st">"layout_with_fr"</span>, 
    bg_col <span class="op">=</span> <span class="st">"black"</span>, 
    plot_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
        v_fill <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html" class="external-link">alpha</a></span><span class="op">(</span><span class="va">vcols</span><span class="op">[</span><span class="va">clust</span><span class="op">]</span>, <span class="fl">.3</span><span class="op">)</span>, 
        v_cex <span class="op">=</span> <span class="fl">.8</span>,
        e_col <span class="op">=</span> <span class="st">"white"</span>
    <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-5-1.png" width="432" style="display: block; margin: auto;"></p>
<p>Usually, will export the plot into a <code>.pdf</code> file. In the <code>igplot</code> function, you can do this by specifying the path to the output file using the <code>outfile</code> option together with <code>width</code> and <code>height</code> to specify the dimensions of the plot (in inches). These options are feeded into the <code><a href="https://rdrr.io/r/grDevices/pdf.html" class="external-link">grDevices::pdf</a></code> function.</p>
</div>
<div class="section level2">
<h2 id="saving-data-for-further-use">Saving data for further use<a class="anchor" aria-label="anchor" href="#saving-data-for-further-use"></a>
</h2>
<p>Often, we want to have a deeper look into a subset of the data. In this case, you can specify the <code>return_data</code> option:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">=</span> <span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span>
    <span class="va">karate</span>, 
    layout <span class="op">=</span> <span class="st">"layout_with_fr"</span>, 
    bg_col <span class="op">=</span> <span class="st">"black"</span>, 
    plot_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
        v_fill <span class="op">=</span> <span class="va">vcols</span><span class="op">[</span><span class="va">clust</span><span class="op">]</span>, 
        v_cex <span class="op">=</span> <span class="fl">.8</span>,
        e_col <span class="op">=</span> <span class="st">"white"</span>
    <span class="op">)</span>,
    return_data <span class="op">=</span> <span class="cn">TRUE</span>,
    plot <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<p>where the <code>plot = FALSE</code> option means that we don’t want to see the plot. When <code>return_data</code> is <code>TRUE</code> the function returns an object of class <code>igplotdat</code>, which is simply a list with two elements: a <code>data.table</code> for the vertices and a <code>data.table</code> for the edges:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># check class of the returned data</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="co">#&gt; [1] "igplotdat"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">vertices</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">edges</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span></code></pre></div>
<p>To get the first couple of rows of each of these <code>data.table</code>s, you can just print the object:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span>
<span class="co">#&gt; Vertices : </span>
<span class="co">#&gt;       name     dim1     dim2 v_pch v_frame    v_fill v_lwd v_cex</span>
<span class="co">#&gt; 1:   Mr Hi 3.257715 1.852703    21   white #420A68FF   0.1   0.8</span>
<span class="co">#&gt; 2: Actor 2 2.460663 2.024133    21   white #420A68FF   0.1   0.8</span>
<span class="co">#&gt; 3: Actor 3 1.766522 1.613863    21   white #420A68FF   0.1   0.8</span>
<span class="co">#&gt; 4: Actor 4 2.766761 1.152950    21   white #420A68FF   0.1   0.8</span>
<span class="co">#&gt; 5: Actor 5 4.652863 1.538713    21   white #BB3754FF   0.1   0.8</span>
<span class="co">#&gt; 6: Actor 6 5.235467 1.822716    21   white #BB3754FF   0.1   0.8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Edges :</span>
<span class="co">#&gt;      name1    name2   dim1_1   dim2_1    dim1_2   dim2_2 e_col e_lwd</span>
<span class="co">#&gt; 1: Actor 3 Actor 10 1.766522 1.613863 0.5416796 3.385529 white   0.3</span>
<span class="co">#&gt; 2: Actor 5 Actor 11 4.652863 1.538713 5.0719871 1.102160 white   0.3</span>
<span class="co">#&gt; 3: Actor 6 Actor 11 5.235467 1.822716 5.0719871 1.102160 white   0.3</span>
<span class="co">#&gt; 4:   Mr Hi Actor 11 3.257715 1.852703 5.0719871 1.102160 white   0.3</span>
<span class="co">#&gt; 5:   Mr Hi Actor 12 3.257715 1.852703 4.4205455 2.938555 white   0.3</span>
<span class="co">#&gt; 6: Actor 4 Actor 13 2.766761 1.152950 3.5614228 0.087314 white   0.3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; `iplotdat` object with layout information</span></code></pre></div>
<p>The <code>dim{i}</code> and <code>dim{i}_{j}</code> columns contain the coordinates of the vertices and edges respectively.</p>
</div>
<div class="section level2">
<h2 id="subsetting-graphs">Subsetting graphs<a class="anchor" aria-label="anchor" href="#subsetting-graphs"></a>
</h2>
<p>The <code>igplot</code> package provides also a couple of useful functions. For example, if you want to plot a subset of the vertices separately, you can use the <code>subset_plot_df</code> function on the <code>dat</code> object. You need to specify the variable name you want to subset on as well as it’s value(s).</p>
<p>Currently, subsetting is only supported for</p>
<ol style="list-style-type: decimal">
<li>a variable that is contained in the <code>vertices</code> slot of a <code>igplotdat</code> object. In this case, the <code>sub_var</code> option should be a character string and the <code>sub_val</code> option has to be provided as well. Then, <code>subset_plot_df</code> will extract all vertices for which <code>sub_var == sub_val</code> evaluates to <code>TRUE</code>. Examples of when you want to use this function are extracting vertices of a certain color, size, etc.</li>
<li>a variable that is not contained in the <code>vertices</code> slot of a <code>igplotdat</code> object. In this case, you need to provide the <code>sub_var</code> option with a <code>logical</code> vector that is of the same length as the number of rows in <code>vertices</code>. The <code>sub_val</code> option will be ignored in this case.</li>
</ol>
<p>For example, if we want to extract the data for vertices for which <code>clust == 2</code>, we can use the following code:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sub_dat</span> <span class="op">=</span> <span class="fu"><a href="../reference/subset_plot_df.html">subset_plot_df</a></span><span class="op">(</span><span class="va">dat</span>, sub_var <span class="op">=</span> <span class="op">(</span><span class="va">clust</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>, keep_edges <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p>Plotting the subsetted data is then straightforward:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span><span class="va">sub_dat</span>, bg_col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-10-1.png" width="432" style="display: block; margin: auto;"></p>
<p>Notice that all edges are are plotted, even if they are not connected to the nodes of interest (although the nodes for which <code>clust == 2</code> is <code>FALSE</code> are not plotted). To plot only those nodes belonging to the second cluster, we can specify the <code>corp</code> option:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span><span class="va">sub_dat</span>, bg_col <span class="op">=</span> <span class="st">"black"</span>, corp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-11-1.png" width="432" style="display: block; margin: auto;"></p>
<p>We can also go one step further and drop all edges that do not connect two vertices of the subgroup of interest entirely by using the <code>keep_edges</code> option in the <code>subset_plot_df</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sub_dat2</span> <span class="op">=</span> <span class="fu"><a href="../reference/subset_plot_df.html">subset_plot_df</a></span><span class="op">(</span><span class="va">dat</span>, sub_var <span class="op">=</span> <span class="op">(</span><span class="va">clust</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>, keep_edges <span class="op">=</span> <span class="st">"within"</span><span class="op">)</span>
<span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span><span class="va">sub_dat2</span>, bg_col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-12-1.png" width="432" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="aligning-two-graphs-on-the-same-vertex-set">Aligning two graphs on the same vertex set<a class="anchor" aria-label="anchor" href="#aligning-two-graphs-on-the-same-vertex-set"></a>
</h2>
<p>When plotting networks over time, we often face the problem that position of nodes are arbitrarily rotated even when the underlying graph remains quite similar. In these situations, we can use a procrustes transform to realign the graphs.</p>
<p>To demonstrate how the function works, we first create two graphs that are only slightly different but give different plotting results (even with the same random seed).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add two edges</span>
<span class="va">karate_2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/add_edges.html" class="external-link">add_edges</a></span><span class="op">(</span>
    <span class="va">karate</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mr Hi"</span>, <span class="st">"Actor 17"</span>, <span class="st">"Actor 13"</span>, <span class="st">"Actor 17"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="va">dat_org</span> <span class="op">=</span> <span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span>
    <span class="va">karate</span>, 
    layout <span class="op">=</span> <span class="st">"layout_with_fr"</span>, 
    plot_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>v_fill <span class="op">=</span> <span class="va">vcols</span><span class="op">[</span><span class="va">clust</span><span class="op">]</span><span class="op">)</span>,
    bg_col <span class="op">=</span> <span class="st">"black"</span>,
    return_data <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-13-1.png" width="432" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="va">dat_new</span> <span class="op">=</span> <span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span>
    <span class="va">karate_2</span>, 
    layout <span class="op">=</span> <span class="st">"layout_with_fr"</span>, 
    plot_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>v_fill <span class="op">=</span> <span class="va">vcols</span><span class="op">[</span><span class="va">clust</span><span class="op">]</span><span class="op">)</span>,
    bg_col <span class="op">=</span> <span class="st">"black"</span>,
    return_data <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-13-2.png" width="432" style="display: block; margin: auto;"></p>
<p>We see that the positions of the clusters have changed, even though we used the same random seed when calculating the layout. To bring the plots into alignment, we can apply the procrustes transform to the coordinates of <code>dat_new</code> with the coordinates of <code>dat_org</code> as the target.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># procrustes transform of layout</span>
<span class="va">dat_new_procrustes</span> <span class="op">=</span> <span class="fu"><a href="../reference/procrustes.html">procrustes</a></span><span class="op">(</span><span class="va">dat_new</span>, <span class="va">dat_org</span><span class="op">)</span>

<span class="co"># check class</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">dat_new_procrustes</span><span class="op">)</span>
<span class="co">#&gt; [1] "igplotdat"</span></code></pre></div>
<p>The <code>procrustes</code> function returns an <code>igplotdat</code> object when the first argument is an <code>igplotdat</code> object. Otherwise, it will return a <code>matrix</code> with two columns that correspond to the first and second dimension of the transformed layout. Since the output is a <code>igplotdat</code> object, we can plot it immediately with the <code>igplot</code> function.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plot transformed graph</span>
<span class="fu"><a href="../reference/igplot.html">igplot</a></span><span class="op">(</span><span class="va">dat_new_procrustes</span>, bg_col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<p><img src="igplot_files/figure-html/unnamed-chunk-15-1.png" width="432" style="display: block; margin: auto;"></p>
<p>As the underlying graphs are different, the transform brings the plots not into perfect alignment. Still, it rotates and scales the plot, such that the “Mr Hi” and “John A” factions are clearly on the same side as in the original plot.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Barum Park.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
